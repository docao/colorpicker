/*!
 * ColorPicker v1.0.0 (https://github.com/docao/colorpicker)
 * Copyright (c) 2015 docv.hcm@gmail.com
 * Licensed under MIT (https://github.com/docao/colorpicker/blob/master/LICENSE)
 */

/**
 * @description A lightweight color picker
 * @version 1.0.0
 * @author docv.hcm@gmail.com
 */
 
 +function(d){function r(a){a=a.toString(16);return(1==a.length?"0"+a:a).toUpperCase()}function u(a){var c=arguments,b=a;a=c[0];[].shift.apply(c);"undefined"==typeof a&&(a=b);return this.each(function(){var c=d(this),b=c.data("bs.colorpicker"),g=d.extend({},e.DEFAULTS,c.data(),"object"==typeof a&&a);b||c.data("bs.colorpicker",b=new e(this,g));if("string"==typeof a)b[a]()})}var g=[0,51,102,153,204,255],t=function(a,c,b){return"#"+r(a)+r(c)+r(b)},e=function(a,c){this.$target=d(a);this.options=c;this.init()},
q=function(a,c){"string"==typeof c?a.addClass(c):a.css(c)};e.DEFAULTS={btnStyle:"btn-default",dropdownAlign:null,defaultColor:"#000000",dropdownStyle:{},cellSize:22,cellStyle:{padding:0,border:"1px solid #ccc",boxSizing:"content-box",cursor:"pointer",textAlign:"center"}};e.prototype={constructor:e,init:function(){var a=this;a.options.cellSize=Math.max(a.options.cellSize,22);a.options.baseSize=6*(a.options.cellSize+2)+21;a.$dropdown=d('<div class="btn-group dropdown"><button type="button" class="btn color-btn" disabled style="opacity:1;filter:alpha(opacity=100)"><i>&nbsp;</i></button><button type="button" data-toggle="dropdown" class="btn dropdown-toggle"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button><div class="dropdown-menu"><table><tr><td class="color-preview" style="padding:0 3px;vertical-align:top"><div></div></td><td class="color-gradient" rowspan="3">&times;</td></tr><tr><td class="color-box"><div></div></td></tr><tr><td class="action-col"></td></tr></table></div></div>');
a.$target.after(a.$dropdown);a.$colorBtn=a.$dropdown.find(".color-btn");a.$arrowBtn=a.$dropdown.find(".dropdown-toggle");a.$miniPreview=a.$colorBtn.children("i");a.$menu=a.$dropdown.find(".dropdown-menu");a.$colorBox=a.$menu.find("td.color-box>div");a.$colorPreview=a.$menu.find("td.color-preview>div");a.$colorGradient=a.$menu.find("td.color-gradient");a.$actionCol=a.$menu.find("td.action-col");a.$colorContainer=d('<div class="clearfix">').appendTo(a.$colorBox);a.$target.hide();q(a.$colorBtn,a.options.btnStyle);
q(a.$arrowBtn,a.options.btnStyle);a.$miniPreview.css({display:"inline-block",width:20,outline:"1px solid #ccc"});a.$menu.css({padding:3,background:"#057",width:a.options.baseSize+a.options.cellSize+9});q(a.$menu,a.options.dropdownStyle);"right"==a.options.dropdownAlign&&a.$menu.addClass("pull-right");a.$colorPreview.css("height",256-a.options.baseSize-32);a.$colorBox.css({overflow:"hidden",position:"relative",width:a.options.baseSize,height:a.options.baseSize});a.$colorContainer.css({width:a.options.baseSize*
g.length,height:a.options.baseSize,position:"absolute"});this.$actionCol.css("height",30);a.$colorGradient.css("width",a.options.cellSize);a.setValue(a.options.defaultColor);a.$dropdown.on("show.bs.dropdown",function(){a.$colorContainer.is(":empty")&&a.createDropdown()});a.$menu.on("click",function(a){a.stopPropagation()})},setValue:function(a){this.$miniPreview.css("backgroundColor",a);this.$colorPreview.css("backgroundColor",a);this.$target.val(a);this.$dropdown.attr("title",a)},setColorEvent:function(a,
c){var b=this;a.mouseenter(function(){b.$colorPreview.css("backgroundColor",d(this).data("bgColor"))}).mouseleave(function(){b.$colorPreview.css("backgroundColor",b.$target.val())});a.on("click",function(a){a.stopPropagation();a=d(this);b.$lastItem&&b.$lastItem.css("color",b.$lastItem.data("bgColor"));b.setValue(a.data("bgColor"));a.css("color",a.data("textColor"));b.$lastItem=a;"function"==typeof c&&c()})},createDropdown:function(){var a=this,c;for(c in g){var b=d('<table class="table pull-left">');
b.css({width:"auto",borderSpacing:3,borderCollapse:"separate",marginBottom:0,borderColor:"#ccc"}).appendTo(a.$colorContainer);for(var p in g){var v=d("<tr>").appendTo(b),e;for(e in g){var f=d('<td><i style="font-size:16px;font-weight:bold">&times;</i></td>').appendTo(v),h=g[c],k=g[p],l=g[e],n=t(h,k,l),m=t(255-h,255-k,255-l);q(f,a.options.cellStyle);f.width(a.options.cellSize);f.height(a.options.cellSize);f.data("rgb",[h,k,l]);f.data("bgColor",n);f.data("textColor",m);f.css({backgroundColor:n,color:n});
f.attr("title",n);a.setColorEvent(f,function(){a.renderGradientBar()})}}}this.renderGradientBar();this.renderActionCol()},renderGradientBar:function(){var a;a=this.$target.val();var c,b;4==a.length?(c=parseInt(a.charAt(1)+a.charAt(1),16),b=parseInt(a.charAt(2)+a.charAt(2),16),a=parseInt(a.charAt(3)+a.charAt(3),16)):(c=parseInt(a.substr(1,2),16),b=parseInt(a.substr(3,2),16),a=parseInt(a.substr(5,2),16));a=[c,b,a];c=a[0];b=a[1];a=a[2];this.$colorGradient.html("");for(var p=255-c,g=(255-b)/p,p=(255-
a)/p,e=d("<table>").appendTo(this.$colorGradient),f=0;127>=f;f++){var h=2*f,k,l;h<=c?(k=Math.round(b/c*h),l=Math.round(a/c*h)):(k=Math.round(b+(h-c)*g),l=Math.round(a+(h-c)*p));if(!isNaN(k)&&!isNaN(l)){var n=t(h,k,l),m=d("<tr>").appendTo(e),m=d("<td>").appendTo(m);m.attr("title",n);m.data("rgb",[h,k,l]);m.data("bgColor",n);m.css({width:this.options.cellSize,minWidth:this.options.cellSize,height:2,cursor:"crosshair",backgroundColor:n});this.setColorEvent(m)}}},renderActionCol:function(){var a=this,
c=d('<ul class="carousel-indicators">').appendTo(a.$actionCol);c.css({position:"static",margin:0,width:"auto"});for(var b=0;b<g.length;b++){var e=d("<li>").appendTo(c);e.css({outline:"none",marginLeft:5,marginRight:5,width:16,height:16});e.attr("tabindex",b);0==b&&e.addClass("active");e.on("click",function(b){b.stopPropagation();b=d(this);c.children(".active").removeClass("active");b.addClass("active");a.$colorContainer.animate({left:-a.options.baseSize*Number(b.attr("tabindex"))})})}}};var w=d.fn.colorpicker;
d.fn.colorpicker=u;d.fn.colorpicker.Constructor=e;d.fn.colorpicker.noConflict=function(){d.fn.colorpicker=w;return this};d(window).on("load.bs.colorpicker.data-api",function(){u.call(d('input[data-toggle="colorpicker"],input[type="color"]'))})}(jQuery);
